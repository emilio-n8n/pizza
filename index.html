<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PizzaVoice AI - L'Agent Vocal pour votre Pizzeria</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Navigation (Visible on all pages except maybe onboarding) -->
    <nav id="navbar">
        <div class="logo">
            <i class="fa-solid fa-pizza-slice"></i> PizzaVoice<span>AI</span>
        </div>
        <div class="nav-links">
            <button onclick="app.navigateTo('login')" class="btn-text">Connexion</button>
            <button onclick="app.navigateTo('signup')" class="btn-primary">Essayer Gratuitement</button>
        </div>
    </nav>

    <main id="app">
        <!-- 10. Page d'accueil -->
        <section id="home" class="view active">
            <div class="hero">
                <div class="hero-content">
                    <h1>Ne ratez plus aucune <span class="gradient-text">commande</span>.</h1>
                    <p>Votre agent IA répond au téléphone, prend les commandes et les note directement dans votre
                        tableau de bord. 24/7.</p>
                    <div class="cta-group">
                        <button onclick="app.navigateTo('signup')" class="btn-primary btn-lg">Créer mon agent <i
                                class="fa-solid fa-arrow-right"></i></button>
                        <button class="btn-secondary btn-lg"><i class="fa-solid fa-play"></i> Écouter une démo</button>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="phone-mockup call-screen">
                        <div class="call-header">
                            <div class="caller-name">PizzaVoice AI</div>
                            <div class="call-time">00:42</div>
                        </div>

                        <div class="call-actions">
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-microphone-slash"></i></div>
                                <span>silence</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-grip"></i></div>
                                <span>clavier</span>
                            </div>
                            <div class="action-btn active">
                                <div class="icon-circle"><i class="fa-solid fa-volume-high"></i></div>
                                <span>haut-parleur</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-plus"></i></div>
                                <span>nouvel appel</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-video"></i></div>
                                <span>FaceTime</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-regular fa-circle-user"></i></div>
                                <span>contacts</span>
                            </div>
                        </div>

                        <div class="hangup-container">
                            <div class="hangup-btn"><i class="fa-solid fa-phone-slash"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 1. Inscription -->
        <section id="signup" class="view">
            <div class="auth-container">
                <h2>Commencez maintenant</h2>
                <p>Créez votre compte pour configurer votre agent.</p>
                <form onsubmit="app.handleSignup(event)">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" required placeholder="contact@mapizzeria.com">
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn-primary btn-block">S'inscrire</button>
                </form>
                <p class="switch-auth">Déjà un compte ? <a href="#" onclick="app.navigateTo('login')">Se connecter</a>
                </p>
            </div>
        </section>

        <!-- 1b. Confirmation Email -->
        <section id="email-confirm" class="view">
            <div class="success-card">
                <div class="icon-pulse warning">
                    <i class="fa-solid fa-envelope"></i>
                </div>
                <h2>Vérifiez votre boîte mail</h2>
                <p>Nous vous avons envoyé un email de confirmation à l'adresse :</p>
                <p style="font-weight: 700; color: var(--primary);" id="confirm-email-display">email@example.com</p>

                <div class="info-box">
                    <p><i class="fa-solid fa-info-circle"></i> Cliquez sur le lien dans l'email pour activer votre
                        compte.</p>
                    <p style="font-size: 0.85rem; margin-top: 0.5rem;">Pensez à vérifier vos spams si vous ne le voyez
                        pas.</p>
                </div>

                <button onclick="app.handleEmailConfirmed()" class="btn-primary btn-block mt-4">
                    <i class="fa-solid fa-check"></i> J'ai confirmé l'email
                </button>
            </div>
        </section>

        <!-- 2. Saisie des informations (Onboarding) -->
        <section id="onboarding" class="view">
            <div class="wizard-container">
                <div class="progress-bar">
                    <div class="fill" style="width: 50%"></div>
                </div>
                <h2>Paramétrez votre Pizzeria</h2>
                <p>L'IA a besoin de ces infos pour répondre aux clients.</p>
                <form onsubmit="app.handleOnboarding(event)">
                    <div class="input-group">
                        <label>Nom de la Pizzeria</label>
                        <input type="text" id="pizzeriaName" required placeholder="Ex: Chez Mario">
                    </div>
                    <div class="input-group">
                        <label>Adresse</label>
                        <input type="text" id="pizzeriaAddress" required placeholder="12 Rue de la Tomate, Paris">
                    </div>
                    <div class="input-group">
                        <label>Téléphone de contact</label>
                        <input type="tel" id="pizzeriaContactPhone" required placeholder="06 12 34 56 78">
                    </div>
                    <div class="input-group">
                        <label>Type de Cuisine</label>
                        <select id="pizzeriaCuisine">
                            <option>Italienne Classique</option>
                            <option>Américaine</option>
                            <option>Napolitaine</option>
                        </select>
                    </div>
                    <div class="file-upload">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <p>Glissez votre menu (PDF/JPG)</p>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Créer mon Agent</button>
                </form>
            </div>
        </section>

        <!-- 2b. Configuration Transfert d'Appel -->
        <section id="call-forwarding" class="view">
            <div class="wizard-container">
                <div class="text-center mb-4">
                    <div class="icon-pulse"
                        style="background: var(--primary); width: 60px; height: 60px; font-size: 1.5rem; margin: 0 auto 1rem;">
                        <i class="fa-solid fa-phone-volume"></i>
                    </div>
                    <h2>Connectons votre téléphone</h2>
                    <p style="max-width: 400px; margin: 0 auto; color: var(--text-muted);">
                        Pour que l'IA puisse répondre à vos clients, vous devez activer une simple redirection.
                        <br><strong>C'est gratuit, réversible à tout moment et sans engagement.</strong>
                    </p>
                </div>

                <div class="phone-display">
                    <p>Voici la ligne directe de votre Assistant :</p>
                    <div class="number" id="agent-phone-number">...</div>
                    <p style="font-size: 0.85rem; margin-top: 0.5rem; opacity: 0.8; line-height: 1.4;">
                        <strong>C'est un numéro technique "secret".</strong><br>
                        Vos clients continuent d'appeler votre numéro habituel.<br>
                        Le transfert redirige simplement les appels vers cette ligne quand vous ne répondez pas.
                    </p>
                </div>

                <h3 style="text-align: center; font-size: 1.1rem; margin-bottom: 1.5rem;">Sélectionnez votre opérateur
                    pour activer la redirection :</h3>

                <div class="instructions-list">
                    <!-- Orange -->
                    <div class="operator-card">
                        <svg class="operator-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect width="100" height="100" fill="#FF6600" />
                            <text x="50" y="55" font-family="Arial, sans-serif" font-weight="bold" font-size="24"
                                fill="white" text-anchor="middle" letter-spacing="-1">orange</text>
                        </svg>
                        <p>Tapez ceci sur votre clavier :</p>
                        <div class="code">**21*<span class="agent-number-display">...</span>#</div>
                        <button class="btn-small btn-secondary"
                            onclick="navigator.clipboard.writeText('**21*' + document.getElementById('agent-phone-number').innerText + '#'); alert('Code copié !')"><i
                                class="fa-regular fa-copy"></i> Copier</button>
                    </div>

                    <!-- SFR -->
                    <div class="operator-card">
                        <svg class="operator-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect width="100" height="100" fill="#E2001A" />
                            <text x="50" y="55" font-family="Arial, sans-serif" font-weight="bold" font-size="35"
                                fill="white" text-anchor="middle">SFR</text>
                        </svg>
                        <p>Tapez ceci sur votre clavier :</p>
                        <div class="code">**21*<span class="agent-number-display">...</span>#</div>
                        <button class="btn-small btn-secondary"
                            onclick="navigator.clipboard.writeText('**21*' + document.getElementById('agent-phone-number').innerText + '#'); alert('Code copié !')"><i
                                class="fa-regular fa-copy"></i> Copier</button>
                    </div>

                    <!-- Bouygues -->
                    <div class="operator-card">
                        <svg class="operator-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"
                            style="background: white;">
                            <rect width="100" height="100" fill="white" />
                            <path d="M20,30 Q50,10 80,30 T80,70" fill="none" stroke="#009FD8" stroke-width="8" />
                            <text x="50" y="65" font-family="Arial, sans-serif" font-weight="bold" font-size="14"
                                fill="#2B2B2B" text-anchor="middle">Bouygues</text>
                            <text x="50" y="80" font-family="Arial, sans-serif" font-size="10" fill="#2B2B2B"
                                text-anchor="middle">Telecom</text>
                        </svg>
                        <p>Tapez ceci sur votre clavier :</p>
                        <div class="code">**61*<span class="agent-number-display">...</span>#</div>
                        <button class="btn-small btn-secondary"
                            onclick="navigator.clipboard.writeText('**61*' + document.getElementById('agent-phone-number').innerText + '#'); alert('Code copié !')"><i
                                class="fa-regular fa-copy"></i> Copier</button>
                    </div>

                    <!-- Free -->
                    <div class="operator-card">
                        <svg class="operator-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <rect width="100" height="100" fill="#CC0000" />
                            <text x="50" y="60" font-family="Arial, sans-serif" font-weight="bold" font-size="35"
                                fill="white" text-anchor="middle" style="font-style: italic;">free</text>
                        </svg>
                        <p>Tapez ceci sur votre clavier :</p>
                        <div class="code">**21*<span class="agent-number-display">...</span>#</div>
                        <button class="btn-small btn-secondary"
                            onclick="navigator.clipboard.writeText('**21*' + document.getElementById('agent-phone-number').innerText + '#'); alert('Code copié !')"><i
                                class="fa-regular fa-copy"></i> Copier</button>
                    </div>
                </div>

                <div class="info-box" style="text-align: center;">
                    <p><i class="fa-solid fa-circle-check"></i> Une fois le code tapé et appelé, vous recevrez un
                        message de confirmation de votre opérateur.</p>
                </div>

                <button onclick="app.navigateTo('dashboard')" class="btn-primary btn-block mt-4">C'est fait, j'accède à
                    mon tableau de bord <i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </section>

        <!-- 3. Confirmation (Attente validation) -->
        <section id="confirmation" class="view">
            <div class="success-card">
                <div class="icon-pulse warning">
                    <i class="fa-solid fa-clock"></i>
                </div>
                <h2>Demande reçue !</h2>
                <p>Nos experts vont maintenant configurer votre agent vocal manuellement.</p>
                <div class="info-box">
                    <p><i class="fa-solid fa-info-circle"></i> Cela prend généralement 24h.</p>
                    <p>Vous recevrez un email dès que votre numéro est actif.</p>
                </div>
                <button onclick="app.navigateTo('home')" class="btn-secondary mt-4">Retour à l'accueil</button>
            </div>
        </section>

        <!-- ADMIN: Login -->
        <section id="admin-login" class="view">
            <div class="auth-container">
                <h2>Administration</h2>
                <p>Accès réservé à l'équipe PizzaVoice.</p>
                <form onsubmit="app.handleAdminLogin(event)">
                    <div class="input-group">
                        <label>Identifiant</label>
                        <input type="text" name="adminId" required>
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" name="adminPass" required>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Connexion Admin</button>
                </form>
            </div>
        </section>

        <!-- ADMIN: Dashboard -->
        <section id="admin-dashboard" class="view">
            <div class="admin-layout">
                <header>
                    <h2><i class="fa-solid fa-user-shield"></i> Back-office</h2>
                    <button onclick="app.navigateTo('home')" class="btn-small">Déconnexion</button>
                </header>

                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>En attente</h3>
                        <div class="value" id="admin-pending-count">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Actifs</h3>
                        <div class="value" id="admin-active-count">0</div>
                    </div>
                </div>

                <h3>Demandes en attente</h3>
                <div class="pizzeria-list" id="admin-pizzeria-list">
                    <!-- Populated by JS -->
                    <div class="empty-state">Aucune demande en attente.</div>
                </div>
            </div>
        </section>

        <!-- 6. Connexion -->
        <section id="login" class="view">
            <div class="auth-container">
                <h2>Bon retour !</h2>
                <p>Connectez-vous pour voir vos commandes.</p>
                <form onsubmit="app.handleLogin(event)">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" required placeholder="contact@mapizzeria.com">
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn-primary btn-block">Se connecter</button>
                </form>
            </div>
        </section>

        <!-- 7. Tableau de bord -->
        <section id="dashboard" class="view">
            <div class="dashboard-layout">
                <aside class="sidebar">
                    <div class="logo-small"><i class="fa-solid fa-pizza-slice"></i></div>
                    <ul class="menu">
                        <li class="active" onclick="app.switchDashboardTab('orders')" id="menu-orders"><i
                                class="fa-solid fa-list"></i> Commandes</li>
                        <li onclick="app.switchDashboardTab('stats')" id="menu-stats"><i
                                class="fa-solid fa-chart-line"></i> Stats</li>
                    </ul>
                    <button onclick="app.navigateTo('home')" class="logout"><i
                            class="fa-solid fa-right-from-bracket"></i></button>
                </aside>
                <div class="main-content">
                    <header>
                        <h2 id="dash-title">Commandes du jour</h2>
                        <div class="status-badge online"><i class="fa-solid fa-circle"></i> Agent Actif</div>
                    </header>

                    <div id="tab-orders" class="dashboard-tab">
                        <div class="info-box" id="pizzeria-contact-info" style="margin-bottom: 2rem;">
                            <!-- Populated by JS -->
                        </div>

                        <div class="stats-row">
                            <div class="stat-card">
                                <h3>Commandes</h3>
                                <div class="value">12</div>
                            </div>
                            <div class="stat-card">
                                <h3>Chiffre d'affaires</h3>
                                <div class="value">184 €</div>
                            </div>
                            <div class="stat-card">
                                <h3>Appels manqués</h3>
                                <div class="value danger">0</div>
                            </div>
                        </div>

                        <div class="orders-list">
                            <div class="empty-state">Chargement des commandes...</div>
                        </div>
                    </div>

                    <div id="tab-stats" class="dashboard-tab" style="display: none;">
                        <div class="stats-container">
                            <div class="stat-card big-stat">
                                <div class="icon-circle"><i class="fa-solid fa-phone-volume"></i></div>
                                <h3>Total Appels Reçus</h3>
                                <div class="value" id="total-calls-count">0</div>
                                <p class="subtext">Depuis l'activation de l'agent</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <i class="fa-solid fa-pizza-slice"></i> PizzaVoice<span>AI</span>
                </div>
                <p class="footer-tagline">L'agent vocal intelligent pour votre pizzeria. Ne ratez plus jamais une
                    commande.</p>
                <div class="social-links">
                    <a href="#" aria-label="Twitter"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
                    <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>

            <div class="footer-section">
                <h4>Produit</h4>
                <ul>
                    <li><a href="#">Fonctionnalités</a></li>
                    <li><a href="#">Tarifs</a></li>
                    <li><a href="#">Démo</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Entreprise</h4>
                <ul>
                    <li><a href="#">À propos</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Carrières</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Ressources</h4>
                <ul>
                    <li><a href="#">Documentation</a></li>
                    <li><a href="#">Support</a></li>
                    <li><a href="#">Guides</a></li>
                    <li><a href="#">API</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Légal</h4>
                <ul>
                    <li><a href="#">Confidentialité</a></li>
                    <li><a href="#">CGU</a></li>
                    <li><a href="#">Cookies</a></li>
                    <li><a href="#">Mentions légales</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 PizzaVoice AI. Tous droits réservés.</p>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>

</html>
```