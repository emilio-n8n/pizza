<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PizzaVoice AI - L'Agent Vocal pour votre Pizzeria</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Navigation (Visible on all pages except maybe onboarding) -->
    <nav id="navbar">
        <div class="logo">
            <i class="fa-solid fa-pizza-slice"></i> PizzaVoice<span>AI</span>
        </div>
        <div class="nav-links">
            <button onclick="app.navigateTo('login')" class="btn-text">Connexion</button>
            <button onclick="app.navigateTo('signup')" class="btn-primary">Essayer Gratuitement</button>
        </div>
    </nav>

    <main id="app">
        <!-- 10. Page d'accueil -->
        <section id="home" class="view active">
            <div class="hero">
                <div class="hero-content">
                    <h1>Ne ratez plus aucune <span class="gradient-text">commande</span>.</h1>
                    <p>Votre agent IA répond au téléphone, prend les commandes et les note directement dans votre
                        tableau de bord. 24/7.</p>
                    <div class="cta-group">
                        <button onclick="app.navigateTo('signup')" class="btn-primary btn-lg">Créer mon agent <i
                                class="fa-solid fa-arrow-right"></i></button>
                        <button class="btn-secondary btn-lg"><i class="fa-solid fa-play"></i> Écouter une démo</button>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="phone-mockup call-screen">
                        <div class="call-header">
                            <div class="caller-name">PizzaVoice AI</div>
                            <div class="call-time">00:42</div>
                        </div>

                        <div class="call-actions">
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-microphone-slash"></i></div>
                                <span>silence</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-grip"></i></div>
                                <span>clavier</span>
                            </div>
                            <div class="action-btn active">
                                <div class="icon-circle"><i class="fa-solid fa-volume-high"></i></div>
                                <span>haut-parleur</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-plus"></i></div>
                                <span>nouvel appel</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-solid fa-video"></i></div>
                                <span>FaceTime</span>
                            </div>
                            <div class="action-btn">
                                <div class="icon-circle"><i class="fa-regular fa-circle-user"></i></div>
                                <span>contacts</span>
                            </div>
                        </div>

                        <div class="hangup-container">
                            <div class="hangup-btn"><i class="fa-solid fa-phone-slash"></i></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer id="footer">
                <div class="footer-content">
                    <div class="footer-section">
                        <div class="footer-logo">
                            <i class="fa-solid fa-pizza-slice"></i> PizzaVoice<span>AI</span>
                        </div>
                        <p class="footer-tagline">L'agent vocal intelligent pour votre pizzeria. Ne ratez plus jamais
                            une
                            commande.</p>
                        <div class="social-links">
                            <a href="#" aria-label="Twitter"><i class="fa-brands fa-twitter"></i></a>
                            <a href="#" aria-label="LinkedIn"><i class="fa-brands fa-linkedin"></i></a>
                            <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook"></i></a>
                            <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                        </div>
                    </div>

                    <div class="footer-section">
                        <h4>Produit</h4>
                        <ul>
                            <li><a href="#">Fonctionnalités</a></li>
                            <li><a href="#">Tarifs</a></li>
                            <li><a href="#">Démo</a></li>
                            <li><a href="#">FAQ</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>Entreprise</h4>
                        <ul>
                            <li><a href="#">À propos</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Carrières</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>Ressources</h4>
                        <ul>
                            <li><a href="#">Documentation</a></li>
                            <li><a href="#">Support</a></li>
                            <li><a href="#">Guides</a></li>
                            <li><a href="#">API</a></li>
                        </ul>
                    </div>

                    <div class="footer-section">
                        <h4>Légal</h4>
                        <ul>
                            <li><a href="#">Confidentialité</a></li>
                            <li><a href="#">CGU</a></li>
                            <li><a href="#">Cookies</a></li>
                            <li><a href="#">Mentions légales</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>&copy; 2024 PizzaVoice AI. Tous droits réservés.</p>
                </div>
            </footer>
        </section>

        <!-- 1. Inscription -->
        <section id="signup" class="view">
            <div class="auth-container">
                <h2>Commencez maintenant</h2>
                <p>Créez votre compte pour configurer votre agent.</p>
                <form onsubmit="app.handleSignup(event)">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" required placeholder="contact@mapizzeria.com">
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn-primary btn-block">S'inscrire</button>
                </form>
                <p class="switch-auth">Déjà un compte ? <a href="#"
                        onclick="event.preventDefault(); app.navigateTo('login')">Se connecter</a>
                </p>
            </div>
        </section>

        <!-- 1b. Confirmation Email -->
        <section id="email-confirm" class="view">
            <div class="success-card">
                <div class="icon-pulse warning">
                    <i class="fa-solid fa-envelope"></i>
                </div>
                <h2>Vérifiez votre boîte mail</h2>
                <p>Nous vous avons envoyé un email de confirmation à l'adresse :</p>
                <p style="font-weight: 700; color: var(--primary);" id="confirm-email-display">email@example.com</p>

                <div class="info-box">
                    <p><i class="fa-solid fa-info-circle"></i> Cliquez sur le lien dans l'email pour activer votre
                        compte.</p>
                    <p style="font-size: 0.85rem; margin-top: 0.5rem;">Pensez à vérifier vos spams si vous ne le voyez
                        pas.</p>
                </div>

                <button onclick="app.handleEmailConfirmed()" class="btn-primary btn-block mt-4">
                    <i class="fa-solid fa-check"></i> J'ai confirmé l'email
                </button>
            </div>
        </section>

        <!-- 2. Saisie des informations (Onboarding) -->
        <section id="onboarding" class="view">
            <div class="wizard-container">
                <div class="progress-bar">
                    <div class="fill" style="width: 50%"></div>
                </div>
                <h2>Paramétrez votre Pizzeria</h2>
                <p>L'IA a besoin de ces infos pour répondre aux clients.</p>
                <form onsubmit="app.handleOnboarding(event)">
                    <div class="input-group">
                        <label>Nom de la Pizzeria</label>
                        <input type="text" id="pizzeriaName" required placeholder="Ex: Chez Mario">
                    </div>
                    <div class="input-group">
                        <label>Adresse</label>
                        <input type="text" id="pizzeriaAddress" required placeholder="12 Rue de la Tomate, Paris">
                    </div>

                    <div class="input-group">
                        <label>Type de Cuisine</label>
                        <select id="pizzeriaCuisine">
                            <option>Italienne Classique</option>
                            <option>Américaine</option>
                            <option>Napolitaine</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Photo de votre menu</label>
                        <input type="file" id="menuPhoto" accept="image/*" onchange="app.previewMenuPhoto(event)">
                        <div id="menuPhotoPreview" style="display: none; margin-top: 1rem;">
                            <img id="menuPhotoImg" style="max-width: 100%; border-radius: 8px; margin-bottom: 1rem;">
                        </div>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Créer mon Agent</button>
                </form>
            </div>
        </section>

        <!-- 2b. Configuration Transfert d'Appel -->
        </section>

        <!-- 2b. Configuration Transfert d'Appel -->
        <section id="call-forwarding" class="view">
            <div class="call-forwarding-container">
                <div class="call-forwarding-card">
                    <div class="card-header">
                        <div class="icon-pulse-large">
                            <i class="fa-solid fa-phone-volume"></i>
                        </div>
                        <h2>Activez votre Agent</h2>
                        <p>Une dernière étape simple pour connecter votre pizzeria.</p>
                    </div>

                    <div class="step-box">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <p class="step-title">Testez votre agent</p>
                            <p class="step-desc">Appelez ce numéro pour simuler une commande client et vérifier que tout
                                fonctionne.</p>
                        </div>
                    </div>

                    <div class="number-display-premium" onclick="app.copyToClipboard('0189713356')">
                        <span class="number-text">01 89 71 33 56</span>
                        <button class="btn-copy"><i class="fa-regular fa-copy"></i></button>
                    </div>
                    <p class="text-center text-muted text-sm mb-4">(Numéro de test de votre agent)</p>

                    <div class="step-box">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <p class="step-title">Activez le transfert d'appel</p>
                            <p class="step-desc"><strong>Satisfait du test ?</strong> Pour que vos vrais clients tombent
                                sur l'agent, composez le code ci-dessous depuis le téléphone de la pizzeria.</p>
                        </div>
                    </div>

                    <div class="operator-codes-section">
                        <p class="mb-3 text-muted">Choisissez votre opérateur :</p>
                        <div id="operator-codes" class="operator-codes">
                            <div class="operator-item">
                                <span class="operator-name">Orange / Sosh</span>
                                <code class="code-snippet">**21*0189713356#</code>
                            </div>
                            <div class="operator-item">
                                <span class="operator-name">SFR / Red</span>
                                <code class="code-snippet">*21*0189713356#</code>
                            </div>
                            <div class="operator-item">
                                <span class="operator-name">Bouygues</span>
                                <code class="code-snippet">*61*0189713356#</code>
                            </div>
                            <div class="operator-item">
                                <span class="operator-name">Free</span>
                                <code class="code-snippet">*21*0189713356#</code>
                            </div>
                            <p class="text-xs text-muted mt-2">Appuyez sur la touche appel après avoir composé le code.
                            </p>
                        </div>
                    </div>

                    <button onclick="app.navigateTo('dashboard')" class="btn-primary btn-block btn-lg mt-4">
                        Tout est configuré, accéder au Dashboard <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- 3. Confirmation (Attente validation) -->
        <section id="confirmation" class="view">
            <div class="success-card">
                <div class="icon-pulse warning">
                    <i class="fa-solid fa-clock"></i>
                </div>
                <h2>Demande reçue !</h2>
                <p>Nos experts vont maintenant configurer votre agent vocal manuellement.</p>
                <div class="info-box">
                    <p><i class="fa-solid fa-info-circle"></i> Cela prend généralement 24h.</p>
                    <p>Vous recevrez un email dès que votre numéro est actif.</p>
                </div>
                <button onclick="app.navigateTo('home')" class="btn-secondary mt-4">Retour à l'accueil</button>
            </div>
        </section>

        <!-- ADMIN: Login -->
        <section id="admin-login" class="view">
            <div class="auth-container">
                <h2>Administration</h2>
                <p>Accès réservé à l'équipe PizzaVoice.</p>
                <form onsubmit="app.handleAdminLogin(event)">
                    <div class="input-group">
                        <label>Identifiant</label>
                        <input type="text" name="adminId" required>
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" name="adminPass" required>
                    </div>
                    <button type="submit" class="btn-primary btn-block">Connexion Admin</button>
                </form>
            </div>
        </section>

        <!-- ADMIN: Dashboard -->
        <section id="admin-dashboard" class="view">
            <div class="admin-layout">
                <header>
                    <h2><i class="fa-solid fa-user-shield"></i> Back-office</h2>
                    <button onclick="app.navigateTo('home')" class="btn-small">Déconnexion</button>
                </header>

                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>En attente</h3>
                        <div class="value" id="admin-pending-count">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Actifs</h3>
                        <div class="value" id="admin-active-count">0</div>
                    </div>
                </div>

                <h3>Demandes en attente</h3>
                <div class="pizzeria-list" id="admin-pizzeria-list">
                    <!-- Populated by JS -->
                    <div class="empty-state">Aucune demande en attente.</div>
                </div>
            </div>
        </section>

        <!-- ADMIN: Pizzeria Detail Modal -->
        <div id="pizzeria-detail-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="app.closePizzeriaDetail()">&times;</span>
                <h2 id="modal-pizzeria-name">Détails Pizzeria</h2>

                <div class="modal-section">
                    <h3>Informations</h3>
                    <p><strong>ID Pizzeria:</strong> <span id="modal-id"
                            style="font-family: monospace; background: #2a2a2a; padding: 0.25rem 0.5rem; border-radius: 4px;"></span>
                    </p>
                    <p><strong>Email:</strong> <span id="modal-email"></span></p>
                    <p><strong>Téléphone:</strong> <span id="modal-phone"></span></p>
                    <p><strong>Adresse:</strong> <span id="modal-address"></span></p>
                    <p><strong>Inscrit le:</strong> <span id="modal-created"></span></p>
                </div>

                <div class="modal-section" id="modal-menu-photo-section" style="display: none;">
                    <h3>Photo du Menu</h3>
                    <img id="modal-menu-photo" src="" alt="Menu"
                        style="width: 100%; border-radius: 8px; margin-top: 0.5rem; cursor: pointer;"
                        onclick="window.open(this.src, '_blank')">
                    <p style="font-size: 0.8rem; color: #aaa; margin-top: 0.5rem;">Cliquez sur l'image pour voir en
                        taille réelle</p>
                </div>

                <div class="modal-actions">
                    <button onclick="app.activatePizzeriaFromModal()" class="btn-primary">
                        <i class="fa-solid fa-check"></i> Activer
                    </button>
                    <button onclick="app.closePizzeriaDetail()" class="btn-secondary">Fermer</button>
                </div>
            </div>
        </div>
        </section>

        <!-- 6. Connexion -->
        <section id="login" class="view">
            <div class="auth-container">
                <h2>Bon retour !</h2>
                <p>Connectez-vous pour voir vos commandes.</p>
                <form onsubmit="app.handleLogin(event)">
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" required placeholder="contact@mapizzeria.com">
                    </div>
                    <div class="input-group">
                        <label>Mot de passe</label>
                        <input type="password" required placeholder="••••••••">
                    </div>
                    <button type="submit" class="btn-primary btn-block">Se connecter</button>
                </form>
                <p class="switch-auth">Vous n'avez pas de compte ? <a href="#"
                        onclick="event.preventDefault(); app.navigateTo('signup')">Créez en un !</a>
                </p>
            </div>
        </section>

        <!-- 7. Tableau de bord -->
        <section id="dashboard" class="view">
            <div class="dashboard-layout dark-theme">
                <aside class="sidebar-dark">
                    <div class="logo-small"><i class="fa-solid fa-pizza-slice"></i></div>
                    <ul class="menu">
                        <li class="active" onclick="app.switchDashboardTab('orders')" id="menu-orders">
                            <i class="fa-solid fa-list"></i> Commandes
                        </li>
                        <li onclick="app.switchDashboardTab('stats')" id="menu-stats">
                            <i class="fa-solid fa-chart-line"></i> Stats
                        </li>
                        <li onclick="app.switchDashboardTab('settings')" id="menu-settings">
                            <i class="fa-solid fa-gear"></i> Paramètres
                        </li>
                    </ul>
                    </ul>
                    <button onclick="app.navigateTo('home')" class="logout">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </aside>
                <div class="main-content-dark">
                    <header class="dashboard-header-dark">
                        <div>
                            <h2 id="dash-title">Commandes - <span id="pizzeria-name-header"></span></h2>
                            <p id="pizzeria-contact-header"
                                style="color: #888; font-size: 0.9rem; margin-top: 0.25rem;"></p>
                        </div>
                        <div class="status-badge-green">
                            <i class="fa-solid fa-circle"></i> Agent Actif
                        </div>
                    </header>

                    <div id="tab-orders" class="dashboard-tab">
                        <div class="stats-row-dark">
                            <div class="stat-card-dark">
                                <h3>Commandes</h3>
                                <div class="value" id="stat-orders-count">0</div>
                            </div>
                            <div class="stat-card-dark">
                                <h3>Chiffre d'affaires</h3>
                                <div class="value" id="stat-revenue">0 €</div>
                            </div>
                            <div class="stat-card-dark">
                                <h3>Appels manqués</h3>
                                <div class="value danger" id="stat-missed-calls">0</div>
                            </div>
                        </div>

                        <div class="orders-list-dark" id="orders-list">
                            <div class="empty-state">Chargement des commandes...</div>
                        </div>
                    </div>

                    <div id="tab-stats" class="dashboard-tab" style="display: none;">
                        <div class="stats-container">
                            <div class="stat-card-dark big-stat">
                                <div class="icon-circle"><i class="fa-solid fa-phone-volume"></i></div>
                                <h3>Total Appels Reçus</h3>
                                <div class="value" id="total-calls-count">0</div>
                                <p class="subtext">Depuis l'activation de l'agent</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 8. Dashboard Livreur -->
        <section id="driver-dashboard" class="view">
            <div class="driver-layout">
                <header class="driver-header">
                    <div class="driver-info">
                        <div class="driver-avatar"><i class="fa-solid fa-helmet-safety"></i></div>
                        <div>
                            <h3 id="driver-name">Livreur</h3>
                            <span class="status-badge-green">En ligne</span>
                        </div>
                    </div>
                    <button onclick="app.logoutDriver()" class="btn-small btn-secondary">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </header>

                <div class="driver-tabs">
                    <button class="active" onclick="app.switchDriverTab('available')">Disponibles</button>
                    <button onclick="app.switchDriverTab('active')">En cours</button>
                </div>

                <div id="driver-orders-list" class="driver-orders-list">
                    <!-- Populated by JS -->
                    <div class="empty-state">Chargement...</div>
                </div>
            </div>
        </section>

        <!-- 9. Suivi de Commande (Client) -->
        <section id="tracking" class="view">
            <div class="tracking-container">
                <div class="tracking-card">
                    <div class="tracking-header">
                        <h2>Suivi de commande</h2>
                        <p id="tracking-order-id" class="text-muted">#...</p>
                    </div>

                    <div class="tracking-status">
                        <div class="status-icon-large" id="tracking-icon">
                            <i class="fa-solid fa-fire-burner"></i>
                        </div>
                        <h3 id="tracking-status-text">En préparation</h3>
                        <p id="tracking-status-desc">Votre pizza est au four !</p>
                    </div>

                    <div class="tracking-steps">
                        <div class="step completed" id="step-new">
                            <div class="step-dot"></div>
                            <div class="step-label">Reçue</div>
                        </div>
                        <div class="step" id="step-preparing">
                            <div class="step-dot"></div>
                            <div class="step-label">Préparation</div>
                        </div>
                        <div class="step" id="step-delivering">
                            <div class="step-dot"></div>
                            <div class="step-label">Livraison</div>
                        </div>
                        <div class="step" id="step-delivered">
                            <div class="step-dot"></div>
                            <div class="step-label">Terminée</div>
                        </div>
                    </div>

                    <div class="tracking-details">
                        <h4>Détails</h4>
                        <div id="tracking-items" class="tracking-items-list">
                            <!-- Items -->
                        </div>
                        <div class="tracking-total">
                            <span>Total</span>
                            <span id="tracking-total">0.00 €</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>




    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>

</html>
```